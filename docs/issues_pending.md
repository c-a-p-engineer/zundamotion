# 未確定の課題

## 動画生成パフォーマンス最適化（追加アクション検討中）
- 発生時刻 / 背景: 2025-11-28 / 長尺スクリプトでレンダリング時間が長く、特にフィルタ適用や中間ファイルIOが支配的。
- 問題点: 1) フィルタグラフをクリップ単位で個別発行しており再利用効率が低い。2) 画像素材のffprobeがシーケンシャル。3) GPU検出結果をタイムラインに反映するまでにオーバーヘッドがある。
- 未確定事項: FFmpegの`-filter_complex_script`化や事前バッチングが有効か、GPU/CPU切替の失敗時リトライ回数の適正値。
- 懸念点: フィルタグラフ共通化はデバッグが難化、GPU経路の不安定化リスク。
- 提案 / 対応案: 1) アセットメタデータ(ffprobe)のLRUキャッシュを追加し、並列化する。2) シーン単位にフィルタグラフをまとめ、同一エフェクトチェーンをキャッシュする。3) GPU可否判定をキャッシュしてVideoPhaseへ共有し、失敗時のみCPUフォールバックにする。4) 進捗計測を追加し、重い区間を特定する軽量プロファイラを組み込む。
- 履歴 / 参照チケット: なし（初回登録）。
