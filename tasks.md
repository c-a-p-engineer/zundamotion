# 📋 Zundamotion タスク詳細

---

## 🚨 P0（必須改善）

### 3. キャラごとのデフォルト設定

* **背景**

  * 現状は各セリフごとに「voice, pitch, speed, subtitle」を全部書かないといけない。
  * 冗長で台本が読みにくい。
* **ゴール**

  * `defaults.characters` にキャラごとの設定をまとめ、未指定セリフには自動で反映。
* **実装イメージ**

  ```yaml
  defaults:
    characters:
      zundamon:
        voice: 3
        pitch: 0
        speed: 1.0
        subtitle:
          color: green
          outline: black
  ```

  * 実行時、セリフに指定がなければこのデフォルトを使用。

---

### 4. 使用VoiceVox情報の出力

* **背景**

  * 現状、完成動画から「どのキャラがどのVOICEVOX IDを使ったか」が分からない。
  * 後から調整やキャラ変更する際に不便。
* **ゴール**

  * 出力時に「使用キャラとVOICEVOX設定」をまとめたレポートを生成。
* **実装イメージ**

  * 出力ファイル: `voice_report.md`
  * 例:

    ```
    Zundamon: VOICEVOX ID=3, Pitch=0, Speed=1.0
    Metan: VOICEVOX ID=2, Pitch=1, Speed=0.9
    ```

---

### 5. 動画サイズ指定（縦横解像度）

* **背景**

  * 現状は1920x1080固定。
  * Shorts(9:16)や正方形(1:1)動画を出力したい場合に制約がある。
* **ゴール**

  * 出力動画の解像度・アスペクト比を台本やCLIから指定可能にする。
* **実装イメージ**

  * YAML:

    ```yaml
    meta:
      resolution: "1080x1920"
      aspect_ratio: "9:16"
    ```
  * CLI: `--ratio 9:16`
  * 内部でリスケール、キャラ/字幕も自動調整。

---

## ⚡ P1（演出・効率）

### 6. 複数キャラ掛け合い & ワイプ表示

* **背景**

  * 現状は1キャラ中心。解説動画や茶番では複数キャラの掛け合いが必須。
* **ゴール**

  * 左右分割レイアウトやワイプで複数キャラを同時表示可能にする。
* **実装イメージ**

  ```yaml
  - char: zundamon
    text: "こんにちは！"
    position: left
  - char: metan
    text: "元気だね！"
    position: right
  ```

---

### 7. キャラアニメーション（入退場・動き）

* **背景**

  * 棒立ちでは単調。動きが欲しい。
* **ゴール**

  * キャラをスライドイン/フェードイン/ズームインなどで登場させられる。
* **実装イメージ**

  ```yaml
  effects:
    - type: slide_in
      from: left
      dur: 0.5
  ```

---

### 8. シナリオ記法（二段構え）

* **背景**

  * 初心者には簡単に、上級者には詳細制御を。
* **ゴール**

  * シンプルな書き方と詳細指定を両立。
* **実装イメージ**

  * シンプル:

    ```yaml
    - char: zundamon
      text: "こんにちは！"
    ```
  * 詳細:

    ```yaml
    - char: zundamon
      text: "こんにちは！"
      expression: happy
      position: left
      se:
        path: se/pon.wav
        at: line_end - 0.2s
    ```

---

### 9. SE相対トリガー

* **背景**

  * 効果音はセリフ終了や開始直後に入れたいが、今は固定秒数しか指定できない。
* **ゴール**

  * 「セリフ終了-0.2秒」など相対的に効果音を配置できる。
* **実装イメージ**

  ```yaml
  se:
    path: se/pon.wav
    at: line_end - 0.2s
  ```

---

### 10. 素材リゾルバ

* **背景**

  * 実行途中で「ファイルがない」と落ちるのは非効率。
* **ゴール**

  * 実行前に不足素材を一覧表示。
* **実装イメージ**

  * 実行前に `assets/` を走査 → 不足分を警告

---

## 🌱 P2（将来拡張）

### 11. YouTube Shorts自動変換

* **背景**

  * 16:9動画を9:16に再利用したい需要がある。
* **ゴール**

  * 横動画から縦動画にリフレーミング。字幕/キャラ位置も自動補正。
* **実装イメージ**

  * CLI: `--profile yt_shorts`

---

### 12. 拡張トランジション

* **背景**

  * 現状はフェードだけ。バリエーション不足。
* **ゴール**

  * wipe / slide / dissolve を追加。
* **実装イメージ**

  * YAML: `transition: wipeleft`

---

### 13. 自動サムネイル出力

* **背景**

  * YouTube運用でサムネは必須。
* **ゴール**

  * 動画から代表フレームをキャプチャ＋タイトル文字を合成。
* **実装イメージ**

  * `select=gt(scene,0.4)`で代表フレーム抽出

---

### 14. PyPI / Docker / CI整備

* **背景**

  * OSS化を前提とするなら配布・再現性が必要。
* **ゴール**

  * pip/Dockerで簡単導入、CIで自動テスト。
* **実装イメージ**

  * `pip install zundamotion`
  * GH ActionsでE2EレンダーをArtifact化

---

### 15. タスク出力（JSON/CSVログ）

* **背景**

  * どの素材をどこで使ったか外部ツールで確認したい。
* **ゴール**

  * JSON/CSV形式で「シーンID, 素材, 開始/終了時間」を出力。
* **実装イメージ**

  ```json
  {
    "scene1": {
      "bg": "street.png",
      "voice": "zundamon",
      "start": "0:00",
      "end": "0:12"
    }
  }
  ```

---

### 16. Viseme対応 & VRM連動（長期）

* **背景**

  * 将来的に「総合映像エンジン」に育てるための布石。
* **ゴール**

  * 発音口形ベースの自然なリップシンク、3Dキャラ対応。
* **実装イメージ**

  * VOICEVOXの音素データから口形推定
  * VRMモデルAPIでモーション制御
